import{D as u,N as i,O as d,P as m,C as o}from"./vendor-81f930e0.js";const g="0x41263cBA59EB80dC200F3E2544eda4ed6A90E76C",b=["function aggregate(tuple(address target, bytes callData)[] calls) public view returns (uint256 blockNumber, bytes[] memory returnData)"];function f(){try{const e=u(R);if(e.provider)return new i(g,b,e)}catch(e){console.log(e)}}const C="0x8AC76a51cc950d9822D68b83fE1Ad97B32Cd580d",A="0x55d398326f99059fF775485246999027B3197955",B="0x7130d2A12B9BCbFAe4f2634d864A1Ee1Ce3Ead9c",p=[C,A,B],D=["function name() external view returns (string memory)","function symbol() view returns (string)","function decimals() public view virtual override returns (uint8)","function balanceOf(address) view returns (uint256)"],c=new d(D);class r{static encodeBalanceCall(t,a){return[{target:a,callData:c.encodeFunctionData("name")},{target:a,callData:c.encodeFunctionData("symbol")},{target:a,callData:c.encodeFunctionData("decimals")},{target:a,callData:c.encodeFunctionData("balanceOf",[`${t}`])}]}static decodeBalanceCall(t){const a=String(c.decodeFunctionResult("name",t[0])[0]),n=String(c.decodeFunctionResult("symbol",t[1])[0]),l=String(c.decodeFunctionResult("decimals",t[2])[0]),s=c.decodeFunctionResult("balanceOf",t[3])[0].toString();return console.log(t),{name:a,symbol:n,balance:s.slice(0,s.length-Number(l))}}}async function v(e){const t=f(),a=p.map(s=>r.encodeBalanceCall(e,s));return(await Promise.all(a.map(s=>t.aggregate(s)))).map(s=>r.decodeBalanceCall(s[1]))}const R=o({});function F(){const{subscribe:e,set:t,update:a}=o(localStorage.getItem("isAuth")||!1);return e(n=>localStorage.setItem("isAuth",n.toString())),{subscribe:e,setAuth:n=>{console.log("set auth"),t(n)}}}function S(){const{subscribe:e,set:t,update:a}=o({address:""});return{subscribe:e,increment:()=>{},setUserAddress:n=>{console.log("set adress"),a(l=>(l.address=n,l))}}}let w;w=F();const E=S(),y=m(E,(e,t)=>{const a=async()=>{console.log("setBalance");const n=await v(e.address);console.log("response",n),t(n)};e.address&&a()});export{w as a,y as b,R as p,E as u};
